<!-- <html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
      body { 
        margin: 0; 
        overflow: hidden; 
        touch-action: none;
      }
      #interaction-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
      }
    </style>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://unpkg.com/aframe-gestures-component@3.0.1/dist/aframe-gestures-component.min.js"></script>
  </head>
  <body>
    <div id="interaction-overlay"></div>
    
    <a-scene
      mindar-image="imageTargetSrc: targets/targets.mind;"
      vr-mode-ui="enabled: false"
      renderer="colorManagement: true"
    >
      <a-assets>
        <a-asset-item id="avatarModel" src="models/1.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-gltf-model
          id="interactiveModel"
          rotation="0 0 0"
          position="0 -1 0"
          scale="1 1 1"
          src="#avatarModel"
          gesture-handler="minScale: 0.5; maxScale: 2;"
          pinchable
          stretchable
          rotatable
        ></a-gltf-model>
      </a-entity>
    </a-scene>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const scene = document.querySelector('a-scene');
        const model = document.getElementById('interactiveModel');
        const overlay = document.getElementById('interaction-overlay');
        
        // Variables para control de gestos
        let isTracking = false;
        let initialScale = { x: 1, y: 1, z: 1 };
        let initialDistance = null;
        let initialRotation = { x: 0, y: 0, z: 0 };
        let initialAngle = null;
        let lastTouch = null;
        
        // Evento cuando se detecta el target
        scene.addEventListener('targetFound', () => {
          isTracking = true;
        });
        
        // Evento cuando se pierde el target
        scene.addEventListener('targetLost', () => {
          isTracking = false;
        });
        
        // Control de gestos táctiles
        overlay.addEventListener('touchstart', function(e) {
          if (!isTracking) return;
          e.preventDefault();
          
          if (e.touches.length === 2) {
            // Dos dedos: rotación y escala
            initialDistance = getDistance(e.touches[0], e.touches[1]);
            initialScale = model.getAttribute('scale');
            initialAngle = getAngle(e.touches[0], e.touches[1]);
            initialRotation = model.getAttribute('rotation');
          } else if (e.touches.length === 1) {
            // Un dedo: rotación
            lastTouch = {
              x: e.touches[0].clientX,
              y: e.touches[0].clientY
            };
          }
        });
        
        overlay.addEventListener('touchmove', function(e) {
          if (!isTracking) return;
          e.preventDefault();
          
          if (e.touches.length === 2) {
            // Gestos con dos dedos
            const currentDistance = getDistance(e.touches[0], e.touches[1]);
            const currentAngle = getAngle(e.touches[0], e.touches[1]);
            
            // Escalado
            const scaleFactor = currentDistance / initialDistance;
            const newScale = {
              x: Math.min(Math.max(initialScale.x * scaleFactor, 0.5), 2),
              y: Math.min(Math.max(initialScale.y * scaleFactor, 0.5), 2),
              z: Math.min(Math.max(initialScale.z * scaleFactor, 0.5), 2)
            };
            model.setAttribute('scale', newScale);
            
            // Rotación
            const angleDiff = currentAngle - initialAngle;
            const newRotation = {
              y: initialRotation.y + angleDiff * 2,
              x: initialRotation.x,
              z: initialRotation.z
            };
            model.setAttribute('rotation', newRotation);
          } else if (e.touches.length === 1 && lastTouch) {
            // Rotación con un dedo
            const deltaX = e.touches[0].clientX - lastTouch.x;
            const currentRotation = model.getAttribute('rotation');
            
            model.setAttribute('rotation', {
              y: currentRotation.y + deltaX * 0.5,
              x: currentRotation.x,
              z: currentRotation.z
            });
            
            lastTouch = {
              x: e.touches[0].clientX,
              y: e.touches[0].clientY
            };
          }
        });
        
        overlay.addEventListener('touchend', function(e) {
          lastTouch = null;
          initialDistance = null;
          initialAngle = null;
        });
        
        // Funciones auxiliares
        function getDistance(touch1, touch2) {
          const dx = touch1.clientX - touch2.clientX;
          const dy = touch1.clientY - touch2.clientY;
          return Math.sqrt(dx * dx + dy * dy);
        }
        
        function getAngle(touch1, touch2) {
          const dx = touch2.clientX - touch1.clientX;
          const dy = touch2.clientY - touch1.clientY;
          return Math.atan2(dy, dx) * 180 / Math.PI;
        }
      });
    </script>
  </body>
</html>
 
 <html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
  </head>
  <body>
    <a-scene
      mindar-image="imageTargetSrc: targets/targets.mind;"
      color-space="sRGB"
      renderer="colorManagement: true,
physicallyCorrectLights"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <a-asset-item id="avatarModel" src="models/1.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-gltf-model
          rotation="0 0 0 "
          position="0 -1 0"
          src="#avatarModel"
        ></a-gltf-model>
      </a-entity>
    </a-scene>
  </body>
</html>
 -->
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        touch-action: none;
      }
      .scale-controls {
        position: absolute;
        bottom: 20px;
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 20px;
        z-index: 1000;
      }
      .scale-btn {
        background-color: rgba(0,0,0,0.5);
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 24px;
      }
    </style>
  </head>
  <body>
    <a-scene
      mindar-image="imageTargetSrc: targets/targets.mind;"
      color-space="sRGB"
      renderer="colorManagement: true; physicallyCorrectLights: true"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <a-asset-item id="foodModel" src="models/1.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-entity 
          id="food-dish"
          gltf-model="#foodModel"
          scale="0.8 0.8 0.8"
          position="0 0.2 0"
          rotation="-15 0 0"
        >
        </a-entity>
      </a-entity>
      
      <div class="scale-controls">
        <button class="scale-btn" id="zoom-in">+</button>
        <button class="scale-btn" id="zoom-out">-</button>
      </div>
      
      <a-entity light="type: ambient; color: #FFF; intensity: 1.2"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 0.8" position="0 2 1"></a-entity>
    </a-scene>

    <script>
      const foodDish = document.querySelector('#food-dish');
      const zoomInBtn = document.getElementById('zoom-in');
      const zoomOutBtn = document.getElementById('zoom-out');
      
      // Tamaño inicial ajustado para platos de comida
      let currentScale = 0.8;
      
      // Ajustar posición y rotación para mejor visualización
      function setupFoodPresentation() {
        foodDish.setAttribute('position', '0 0.2 0');
        foodDish.setAttribute('rotation', '-15 0 0');
      }
      
      // Controles de zoom
      zoomInBtn.addEventListener('click', () => {
        currentScale += 0.1;
        foodDish.setAttribute('scale', `${currentScale} ${currentScale} ${currentScale}`);
      });
      
      zoomOutBtn.addEventListener('click', () => {
        if(currentScale > 0.3) {
          currentScale -= 0.1;
          foodDish.setAttribute('scale', `${currentScale} ${currentScale} ${currentScale}`);
        }
      });
      
      // Interacción táctil para rotación
      let isDragging = false;
      let previousPosition = { x: 0 };
      let currentRotation = 0;
      
      window.addEventListener('touchstart', (e) => {
        isDragging = true;
        previousPosition.x = e.touches[0].clientX;
      });
      
      window.addEventListener('touchmove', (e) => {
        if(!isDragging) return;
        
        const deltaX = e.touches[0].clientX - previousPosition.x;
        currentRotation += deltaX * 0.5;
        foodDish.setAttribute('rotation', `-15 ${currentRotation} 0`);
        
        previousPosition.x = e.touches[0].clientX;
      });
      
      window.addEventListener('touchend', () => {
        isDragging = false;
      });
      
      // Inicialización
      window.addEventListener('load', () => {
        setupFoodPresentation();
        
        // Ocultar controles después de 5 segundos (aparecen al tocar)
        document.querySelector('.scale-controls').style.opacity = '0';
      });
      
      // Mostrar controles al tocar
      window.addEventListener('click', () => {
        const controls = document.querySelector('.scale-controls');
        controls.style.opacity = '1';
        setTimeout(() => {
          controls.style.opacity = '0';
        }, 3000);
      });
    </script>
  </body>
</html>






